# ゲームルール

オンライン UNO ゲーム「ドボン UNO」のゲームルール仕様書。

---

## 1. 基本設定

| 項目         | 値             |
| ------------ | -------------- |
| デッキ       | 1 組（112 枚） |
| 初期手札     | 7 枚           |
| UNO 宣言     | 不要           |
| タイムアウト | 10 秒          |

---

## 2. カード構成

### 数字カード（76 枚）

各色（赤・青・緑・黄）に 0〜9。0 は各色 1 枚、1〜9 は各色 2 枚。

### 記号カード（24 枚）

各色 2 枚ずつ: スキップ、リバース、ドロー 2

### ワイルドカード（8 枚）

ワイルド 4 枚、ワイルドドロー 4（以下ドロー 4）4 枚

### 強制色変えカード（4 枚）

各色（赤・青・緑・黄）1 枚ずつ。ワイルドカードと同様に任意のカードの上に出せるが、色の選択はできず、そのカードの色が自動的に選択される。

### 点数

| カード     | 点数     |
| ---------- | -------- |
| ドロー 4   | 50 点    |
| ワイルド   | 30 点    |
| ドロー 2   | 20 点    |
| スキップ   | 20 点    |
| リバース   | 20 点    |
| 強制色変え | 10 点    |
| 数字カード | その数字 |

---

## 3. ゲームの流れ

1. 各プレイヤーに 7 枚ずつ配る
2. 山札から 1 枚を場に出す
3. オーナーの左隣から時計回りに進行
4. 手番のプレイヤーはカードを出すか、山札から引く
5. 誰かが上がるか、山札がなくなるまで続ける

### カードを出す条件

場のカードと色・数字・記号のいずれかが一致するカード、またはワイルドカード・強制色変えカードを出せる。

### 最初のカードの処理

| カード     | 処理                                                                                            |
| ---------- | ----------------------------------------------------------------------------------------------- |
| 数字       | そのまま開始                                                                                    |
| スキップ   | 最初のプレイヤーがスキップ                                                                      |
| リバース   | 順番が逆になりオーナーの右隣から開始                                                            |
| ドロー 2   | 2 枚引くか、ドロー 2/4 を重ねて出せる                                                           |
| ワイルド   | 最初のプレイヤーが色を選択                                                                      |
| ドロー 4   | 4 枚引くか、ドロー 4 を重ねて出せる。引いた場合は次のプレイヤー、重ねた場合は出した人が色を選択 |
| 強制色変え | そのカードの色でそのまま開始（色選択不要）                                                      |

### 上がり制限

- **記号カードで上がることはできない**（スキップ、リバース、ドロー 2、ワイルド、ドロー 4）
- 記号カードの重ね出しで手札が 0 枚になっても上がれない
- **数字カードの重ね出しでは上がれる**（例: 手札が赤 5×2 枚の場合、2 枚同時に出して上がれる）
- **強制色変えカードで上がることはできない**（記号カード扱い）

### 上がりに対するドボン

- 上がりカードに対してドボン可能
- 誰もドボンできない場合は、即座に上がりが確定する

---

## 4. 同じカードの重ね出し

全く同じカード（色と数字/記号が完全一致、またはワイルド同士・ドロー 4 同士・強制色変え同士）なら複数枚を同時に出せる。

---

## 5. ドローカードの累積

- ドロー 2 には、ドロー 2 またはドロー 4 を重ねて出せる
- ドロー 4 には、ドロー 4 のみ重ねて出せる
- 重ねられない場合、累積分を引く
- 手札にドローカードがあっても、あえて引くことを選択できる

**例:** A がドロー 2 → B がドロー 2 → C がドロー 4 → D は返せず 8 枚引く

---

## 6. 色選択

ワイルド・ドロー 4 を出したプレイヤーが色を選択する。
ドロー 4 が連続で重ねられた場合、**最後に出したプレイヤーのみ**が色を選択する。

**強制色変えカードは色選択不要**。カードの色が自動的に選択される。

---

## 7. カットイン

全く同じカードを持っていれば、自分の手番でなくても出せる。

- 上がりカードにはカットインできない（ドボンのみ可能）
- カットイン後の手番は、カットインしたプレイヤーの次に移る
- 複数プレイヤーが同時に割り込んだ場合は先着順
- 連続カットイン可能
- カットインでもカード効果は発動する（スキップに割り込んだ場合、割り込んだ人の次のプレイヤーがスキップされる）
- ワイルドとドロー 4 の色選択中でも選択後でもカットイン可能。カットインしたプレイヤーが色を選択する。

---

## 8. 任意ドロー

出せるカードがあっても山札から引ける。引いた後、手札全体から出すか、出さずにパスできる。

---

## 9. ドボン

### ドボンとは

出されたカードの点数と自分の手札の合計点数が一致した場合、「ドボン」を宣言して上がれる。

### 条件

- 手札に記号カードが含まれていても可
- 重ね出しの場合は合計点数で判定
- 複数人がドボン可能
- 上がりカードに対してもドボン可能（10 秒以内に宣言）

### 宣言タイミング

次のプレイヤーが行動するまでに宣言する。

### 検出と宣言

システムがドボン可能な状況を自動検出し、該当プレイヤーに**通知**する。
プレイヤーがドボンボタンを押すことで宣言が成立する（自動宣言はされない）。

### 例

- A が「5」を出す → B の手札が 2+3=5 点 → B がドボン
- A がドロー 2（20 点）を出す → B と C の手札がそれぞれ 20 点 → B と C がドボン可能。B のドボンの後に C がドボン可能。

---

## 10. ドボン返し

### 条件

ドボンされた人の残り手札の合計点数と、ドボンした人の手札の合計点数が一致すれば、ドボン返しできる。

- 複数人からドボンされた場合、条件を満たせば全員に対してドボン返し可能
- ドボン返し返しは不可（1 回のみ）

### 例

**成立:** A の手札がドロー 2×2 枚（40 点）→ A がドロー 2 を出す（残り 20 点）→ B が 20 点でドボン → A の残り手札と B の手札が一致 → ドボン返し成立

**不成立:** A の手札がドロー 2 と 5 （25 点）→ A がドロー 2 を出す（残り 5 点）→ B が 20 点でドボン → 点数不一致 → ドボン返し不成立

---

## 11. 点数計算

### 通常上がり

各プレイヤーが、上がった人に自分の手札の合計点数を支払う。

### ドボン上がり

ドボンされた人が、ドボンした人に**全員の手札の合計点数**を支払う。

- 「全員」にはドボンした人の手札は**含む**
- ドボンされた人が出したカードの点数は**含む**
- 複数人がドボンした場合、それぞれに全員分を支払う

### 例 1 人がドボン

A:20
B:30
C:40
D:50

の状態から、D が 20 を出して A がドボンした場合、

A:20
B:30
C:40
D:50

の合計の 140 を D が A に支払う。D から 20 は引かれないことに注意。

### 例 2 人がドボン

A:20
B:20
C:40
D:50

の状態から、D が 20 を出して A と B がドボンした場合、

A:20
B:20
C:40
D:50

の合計の 130 を D が A と B に支払う。D から 20 は引かれないことに注意。

**上がりカードへのドボン:** 上がりカードに対してドボンが成立した場合、上がりは無効となり、上がろうとした人が「ドボンされた人」として点数を支払う。

### ドボン返し

ドボンした人が、ドボン返しした人に**全員の手札の合計点数**を支払う。
複数人にドボン返しした場合、それぞれから全員分を受け取る（例: B と C にドボン返しした場合、B から全員分、C からも全員分を受け取る）。

### 例 1 人のドボンに対してドボン返し

A:20
B:30
C:40
D:40

の状態から、D が 20 を出して A がドボンして、D がドボン返しをした場合

A:20
B:30
C:40
D:40

の合計の 130 を A が D に支払う。

### 例 2 人のドボンに対してドボン返し

A:20
B:20
C:40
D:40

の状態から、D が 20 を出して A と B がドボンして、D がドボン返しをした場合

A:20
B:20
C:40
D:40

の合計の 120 を A が D に支払う。
の合計の 120 を B が D に支払う。

---

## 12. 山札切れ

### 終了条件

山札の最後の 1 枚を引いた瞬間にゲーム終了。引いたカードは出せない。捨て札は山札に戻さない。

ドロー累積中に山札が切れた場合、引ける分だけ引いてゲーム終了。

### 点数のやり取り

山札切れの場合、点数のやり取りは発生しない。

### レート倍増

山札切れが連続すると、次のゲームのレートが倍増する。
連続回数は**ルーム全体**でカウント（オーナー変更に関係なく継続）。
誰かが上がるとリセット（通常上がり・ドボン・ドボン返し、すべての上がり方でリセット）。

| 連続回数 | レート |
| -------- | ------ |
| 1 回目   | 2 倍   |
| 2 回目   | 4 倍   |
| 3 回目   | 8 倍   |
| n 回目   | 2^n 倍 |

---

## 13. 次のゲームの開始

### 上がった場合

上がったプレイヤーが次のゲームの最初の手番。

### 山札切れの場合

山札がなくなった時点での次の手番だったプレイヤーが最初の手番。

---

## 14. タイムアウト処理

操作可能になってから 10 秒間操作がない場合、以下の自動処理が行われる。

| 状況                   | 自動処理           |
| ---------------------- | ------------------ |
| 手番（未ドロー）       | 1 枚引いてパス     |
| 手番（ドロー済み）     | パス               |
| 色選択中               | ランダムに色を選択 |
| ドロー累積を受ける状況 | 累積分を引く       |
| ドボン可能             | ドボンしない       |
| カットイン可能         | 割り込まない       |
